    </div>
        <div>
          <label>Schubkarre</label>
          <select id="cSchubkarre">
            <option value="no">nein</option>
            <option value="yes">ja</option>
          </select>
        </div>
      </div>

      <label>Kunden‑Notiz (automatisch)</label>
      <textarea id="cCustomerNote" readonly placeholder="(wird aus dem Kunden‑Tab übernommen)"></textarea>

      <label>Team‑Hinweise</label>
      <textarea id="cNote" placeholder="z. B. Zufahrt, Besonderheiten…"></textarea>

      <div class="card">
        <div class="cardTitle">
          <b>Interne Materialliste</b>
          <span class="pill" id="matPill">0</span>
        </div>

        <div class="grid3" style="margin-top:10px;">
          <div>
            <label>Material</label>
            <select id="mName">
              <optgroup label="Matten / Elemente">
                <option>Doppelstabmatte</option>
                <option>Diagonalgeflecht</option>
                <option>Tornado</option>
                <option>Elektrozaun</option>
              </optgroup>
              <optgroup label="Pfosten">
                <option>Pfosten</option>
                <option>Eckpfosten</option>
              </optgroup>
              <optgroup label="Leisten / Zubehör">
                <option>U-Leiste</option>
                <option>Torleiste</option>
                <option>Abdeckkappe</option>
              </optgroup>
              <optgroup label="Beton">
                <option>Beton (Sack)</option>
                <option>Fertigbeton (m³)</option>
              </optgroup>
              <optgroup label="Sonstiges">
                <option value="__custom__">Sonstiges (Freitext)…</option>
              </optgroup>
            </select>
            <input id="mNameCustom" placeholder="Material frei eingeben…" style="display:none; margin-top:8px;" />
          </div>
          <div>
            <label>Menge</label>
            <input id="mQty" inputmode="decimal" />
          </div>
          <div>
            <label>Einheit</label>
            <select id="mUnit">
              <option>Stk</option>
              <option>m</option>
              <option>m²</option>
              <option>Sack</option>
              <option>m³</option>
              <option>Paket</option>
            </select>
          </div>
        </div>
<div class="row" style="margin-top:10px;">
          <button class="btn good" id="btnAddMat" type="button">+ hinzufügen</button>
          <button class="btn bad" id="btnClearMat" type="button">Liste leeren</button>
        </div>

        <div id="matList" style="margin-top:10px;"></div>
      </div>

      <div class="card">
        <div class="cardTitle">
          <b>Fotos</b>
          <span class="pill" id="photoPill">0</span>
        </div>
        <div class="hint" style="margin:8px 0 10px;">
          Desktop‑WhatsApp kann Fotos nicht automatisch anhängen → nutze „Fotos.zip“.
        </div>
        <div id="photoGrid"></div>
      </div>

      <div class="row" style="margin-top:10px;">
        <button class="btn accent green" id="btnCWhats" type="button">WhatsApp Intern</button>
        <button class="btn blue" id="btnCDown" type="button">Intern‑Text Download</button>
        <button class="btn blue" id="btnCZip" type="button">Fotos.zip</button>
        <button class="btn purple" id="btnCMail" type="button">E‑Mail (Text)</button>
      </div>
    </section>

  </div>

  <div id="toast"></div>

  <datalist id="gateWidthList">
    <option value="80"></option>
    <option value="100"></option>
    <option value="125"></option>
    <option value="150"></option>
    <option value="200"></option>
  </datalist>

  <script src="./app.js" defer></script>
<!-- PWA Service Worker (Auto-Update) -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const reg = await navigator.serviceWorker.register("./sw.js", { updateViaCache: "none" });

          const doUpdate = () => reg.update().catch(()=>{});
          doUpdate();
          setInterval(doUpdate, 15*60*1000);

          if (reg.waiting) reg.waiting.postMessage({ type: "SKIP_WAITING" });

          reg.addEventListener("updatefound", () => {
            const sw = reg.installing;
            if (!sw) return;
            sw.addEventListener("statechange", () => {
              if (sw.state === "installed" && navigator.serviceWorker.controller) {
                if (reg.waiting) reg.waiting.postMessage({ type: "SKIP_WAITING" });
              }
            });
          });

          navigator.serviceWorker.addEventListener("controllerchange", () => {
            location.reload();
          });
        } catch (e) {
          console.warn("SW register failed", e);
        }
      });
    }
  </script>
</body>
</html>
